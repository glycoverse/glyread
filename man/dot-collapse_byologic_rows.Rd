% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/byonic-byologic.R
\name{.collapse_byologic_rows}
\alias{.collapse_byologic_rows}
\title{Collapse hierarchical search-result rows to peptide–sample abundances}
\usage{
.collapse_byologic_rows(df)
}
\description{
Many MS search engines export peptide tables where the \emph{Row} column
encodes a three-level hierarchy:
\itemize{
\item \strong{Level 1} (“1”, “2”, …) — peptide aggregated across all samples.
\item \strong{Level 2} (“1.1”, “1.2”, …) — peptide intensity in a single sample.
\item \strong{Level 3} (“1.1.1”, “1.1.2”, …) — individual PSMs within that sample.
}
}
\details{
This helper keeps exactly one row per \strong{peptide × sample} pair by
applying the following rules:
\enumerate{
\item If a peptide appears in \emph{multiple} samples, discard its level-1 row
and keep all level-2 rows.
\item If a peptide appears in \emph{one} sample only, keep the single level-1
row (its intensity already equals that level-2 value).
\item Always drop level-3 rows (individual PSMs).
}

The algorithm infers the hierarchy from the number of dots (\code{.}) in
\emph{Row}, so it is robust to any absolute numbering. The result can be
returned in long format or pivoted to wide format for downstream
statistics or visualization.
}
